/*****************************************************************************
 *                                                                           *
 *                       Copyright (c) 2012-2013 London Hydro                        *
 *                            ALL RIGHTS RESERVED                            *
 *                                                                           *
 *****************************************************************************
 *
 *  File Name:  SurveyService.java
 *
 *  Facility:   London Hydro API
 *
 *  Author:     Love Talwar, Affinity Systems
 *
 *  Revision History
 *
 *  Date        Author              Description
 *  -------     ------------------  -----------------------------------------
 *  19Apr13     Love Talwar 		Original version
 */

package com.londonhydro.api.service;

import javax.annotation.security.PermitAll;
import javax.servlet.http.HttpServletRequest;
import javax.validation.constraints.NotNull;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.Response;

import org.hibernate.validator.constraints.NotEmpty;
import org.jboss.resteasy.annotations.cache.Cache;
import org.jboss.resteasy.spi.validation.ValidateRequest;

import com.londonhydro.model.SurveySubmissions;

/**
 * SurveyService Service .
 * @author Love Talwar (ltalwar@affsys.com)
 */
@Path("/v1/surveys")
@ValidateRequest
public interface SurveyService
{

    @PermitAll
    @POST
    @Consumes("application/json")
    @Produces("application/json")
    public Response submitSurvey(SurveySubmissions surveySubmissions,  @Context HttpServletRequest req) throws WebApplicationException;

    @Cache(maxAge = 900, mustRevalidate = true) // 5 minutes
    @PermitAll
    @GET
    @Path("/{loginId}")
    @Produces("application/json")
    public Response listSurveys(@PathParam("loginId") @NotNull @NotEmpty Long loginId) throws WebApplicationException;
	
}
