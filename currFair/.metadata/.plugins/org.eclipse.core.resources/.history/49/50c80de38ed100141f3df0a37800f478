<html>
<head>
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script>
function consumeMessage(){
$.ajax({
    type: 'POST', 
    url: '/api/messages/consume',
    contentType: 'application/json; charset=UTF-8',
    dataType: 'JSON',
    data: $("#input").val(),
    success: function(data) {
    	var html="<b>Reports</b><br>";
    	html= html+"<table><tr><td>UserId</td><td>CurrencyFrom</td>+<td>CurrencyTo</td>+<td>AmountSell</td>+<td>AmountBuy</td>+<td>Rate</td>+<td>TimePlaced</td>"
		+ "<td>OriCountry</td>";
    	$.each(data, function(k,v) {
    		var key = k;
    		
    		html= html+ "<tr><td colspan=8><bold>"+key+"</bold></td></tr>";
    		
    		  $.each(this, function(k, v) {
    		    	var key = k;
    		    	var value = v;
    		    	html = html + "<tr><td>"+ value.userId + "/td><td>" + value.currencyFrom + "/td><td>"+ value.currencyTo + "/td><td>"+value.amountSell + "/td><td>"
    		    	+ value.amountBuy + "/td><td>" + value.rate + "/td><td>" + value.timePlaced + "/td><td>" + value.originatingCountry+"/td></tr>" ;
    		    
    		  });
    		  html= html+"</ul>";
    		  
    		});
    	$( "#report" ).html(html);
    },
    error: function(data) {
        alert('fail');
    }

});
}
</script>
</head>
<body>
	<div id="consume">
		<input type="textarea" rows="10" cols="50" id="input" name="inp">
		</input>
		<input type="button" value="action" onclick="consumeMessage();"/>
	</div>
	<div id="report">
	</div>

</body>

</html>