/*****************************************************************************
 *                                                                           *
 *                       Copyright (c) 2012-2013 London Hydro                *
 *                            ALL RIGHTS RESERVED                            *
 *                                                                           *
 *****************************************************************************
 *
 *  File Name:  SurveyManagerImpl.java
 *
 *  Facility:   London Hydro API
 *
 *  Author:     Love Talwar, Affinity Systems
 *
 *  Revision History
 *
 *  Date        Author              Description
 *  -------     ------------------  -----------------------------------------
 *  19Apr13     Love Talwar 		Original version
 */

package com.londonhydro.api.manager.impl;

import java.util.List;

import com.google.inject.Inject;
import com.londonhydro.api.manager.SurveyManager;
import com.londonhydro.model.SurveyAnswers;
import com.londonhydro.model.SurveySubmissions;
import com.londonhydro.orm.dao.SurveyDAO;

/**
 * Implementation of Survey Manager / Data Access.
 * ...
 */
public class SurveyManagerImpl extends AbstractManagerImpl implements SurveyManager
{

    @Inject
    private SurveyDAO surveyDAO;

    public void submitSurvey(SurveySubmissions surveySubmissions)
    {
        surveyDAO.submitSurvey(surveySubmissions);
        for (SurveyAnswers surveyAnswers : surveySubmissions.getSurveyAnswers())
        {
            surveyAnswers.setSurveySubmissionId((Long)surveySubmissions.getId());
        }
        surveyDAO.submitSurveyAnswers(surveySubmissions.getSurveyAnswers());
    }
    
    public List<SurveySubmissions> listSurveys(Long loginId)
    {
        return surveyDAO.listSurveys(loginId);
    }
    
    
    
}
